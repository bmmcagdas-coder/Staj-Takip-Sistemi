<script>
    (function (w, d, s, id) {
        if (typeof (w.webpushr) !== 'undefined') return; 
        w.webpushr = w.webpushr || function () { (w.webpushr.q = w.webpushr.q || []).push(arguments); };
        var js, fjs = d.getElementsByTagName(s)[0]; 
        js = d.createElement(s); js.id = id; js.async = 1;
        js.src = "https://cdn.webpushr.com/app.min.js"; 
        fjs.parentNode.insertBefore(js, fjs);
    }(window, document, 'script', 'webpushr-jssdk'));

    webpushr('setup', { 
        'key': 'BJwJOjMGw9DiC9Zk9SkRJbown9Lit_HSxJ8KGj0g647IX2ijZFI95v_M8QX6QLsKMGDfRJ2KxSSem4ylNFUYC34',
        // KRİTİK DÜZELTME: Klasör ismini (repository adını) ekliyoruz
        'sw': '/Staj-Takip-Sistemi/webpushr-sw.js' 
    });

    window.onload = function() {
        setTimeout(function() {
            console.log("Sistem: İzin kutusu tetikleniyor...");
            webpushr('showPrompt'); 
        }, 2000);
    };

    webpushr('onNotificationPromptAction', function(action) {
        if (action === 'allow') {
            document.getElementById('status-box').innerHTML = "<h3 style='color:green;'>Tebrikler!</h3><p>Bildirim kaydınız başarıyla yapıldı. Bu sayfayı kapatıp programa dönebilirsiniz.</p>";
        }
    });
</script>
